\documentclass[11pt]{amsart}
\usepackage{geometry}                % See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   % ... or a4paper or a5paper or ... 
%\geometry{landscape}                % Activate for for rotated page geometry
%\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}

\title{CS267 Assignment 3: Parallelize Knapsack}
\author{Chun Ming Chin, Chris Melgaard, Viraj Kulkarni }
%\date{}                                           % Activate to display a given date or no date

\begin{document}
\maketitle
%\section{}
%\subsection{}




\section{Comparing Answers}

To ensure we get the correct answer, like the provided serial and fixed parallel codes, we save the outputs of the used, weight, value and total arrays and compare the results with the original serial version. The save function is obtained by modifying source code from homework 2.

In order to compare answers accurately, we changed the srand function to have a constant seed (i.e. stand48( 1000 ) so we can use our serial results to compare with our ups results. In addition, for the initialization stage in the knapsack.upc implementation, we use a for loop on MYTHREAD==1 instead of the $upc_forall$ loop to iterate on the lrand48() operations for the weight and value arrays. 

We do blocking operations on rows of T (i.e. operating on contiguous blocks of memory )  so as to increase cache hits. This would minimize communication time, hence making the code run faster. 

Next, we also considered pipelining our computations, because an object, j, is only dependent on its previous object j-1.

\section{Results}

The time required for serial implementation is 0.031931
The time required for upc implementation is 11.4287, 10.9262
Time required is reduced to 10.2737 when 2 $upc_forall$ loops are replaced by for loops 

When the number of threads is 4 for a capacity of 1000, the block size is 250
When the number of threads is 8 for a capacity of 1000, the block size is 125
When the number of threads is 16 for a capacity of 1000, the block size is 63
When the number of threads is 32 for a capacity of 1000, the block size is 32

\section{Solution}
We check the solution by breaking the if statement: 
$if( best_value != best_value_serial || best_value != total_value || total_weight > capacity )$
into 3 separate if statements:

$ if( best_value != best_value_serial ) $
$ if( best_value != total_value )$
$ if( total_weight > padCapacity ) $ 
\end{document}  